Requirements
   1. Control plane t2.medium 2cp, 2gb ram
   2. 2 workers nodes

chmod 600 ram.pem

step1: install docker in all servers

sudo apt update
sudo apt install -y apt-transport-https ca-certificates curl software-properties-common
curl -fsSL https://download.docker.com/linux/ubuntu/gpg | sudo gpg --dearmor -o /usr/share/keyrings/docker-archive-keyring.gpg
echo "deb [arch=amd64 signed-by=/usr/share/keyrings/docker-archive-keyring.gpg] https://download.docker.com/linux/ubuntu $(lsb_release -cs) stable" | sudo tee /etc/apt/sources.list.d/docker.list > /dev/null
sudo apt update
sudo apt install -y docker-ce docker-ce-cli containerd.io
sudo systemctl enable docker
sudo systemctl start docker
sudo usermod -aG docker ubuntu
newgrp docker

updated docker install

#!/bin/bash
sudo apt update -y
sudo apt install -y apt-transport-https ca-certificates curl software-properties-common
sudo apt install -y docker.io
sudo systemctl enable docker
sudo systemctl start docker
sudo usermod -aG docker ubuntu
newgrp docker
docker --version


step2: Download RKE binary in masterplane

wget https://github.com/rancher/rke/releases/download/v1.8.7/rke_linux-amd64
chmod +x rke_linux-amd64
sudo mv rke_linux-amd64 /usr/local/bin/rke
rke --version


step3: create cluster.yml

nodes:
  - address: 172.31.31.149
    user: ubuntu
    role: [controlplane,etcd,worker]
    ssh_key_path: /home/ubuntu/mykey.pem

  - address: 172.31.16.172
    user: ubuntu
    role: [worker]
    ssh_key_path: /home/ubuntu/mykey.pem

  - address: 172.31.16.174
    user: ubuntu
    role: [worker]
    ssh_key_path: /home/ubuntu/mykey.pem

